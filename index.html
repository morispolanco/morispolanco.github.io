<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Buscador</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    


    <div id="app"></div>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        function Buscador() {
            const appElement = document.getElementById('app');
            const state = {
                pregunta: '',
                respuesta: ''
            };

            const handleSubmit = async () => {
                if (!state.pregunta) {
                    alert('Por favor, escriba una pregunta o caso.');
                    return;
                }

                try {
                    const api_key = 'YOUR_API_KEY'; // Reemplaza con tu API key
                    const response = await axios.post(
                        'https://api.respell.ai/v1/run',
                        {
                            spellId: 'k0GhQkJOn7IKEY-BdghY6',
                            inputs: {
                                pregunta: state.pregunta
                            }
                        },
                        {
                            headers: {
                                Authorization: `Bearer ${api_key}`,
                                'Accept': 'application/json',
                                'Content-Type': 'application/json'
                            }
                        }
                    );

                    if (response.status === 200) {
                        state.respuesta = response.data.outputs.respuesta;
                        render();
                    } else {
                        alert('Error al enviar la solicitud a la API');
                    }
                } catch (error) {
                    alert('Error en la solicitud');
                }
            };

            const render = () => {
                appElement.innerHTML = `
                    <h1>Buscador</h1>
                    <p>Esta aplicación responde preguntas sobre la legislación de Guatemala, buscando en la Web.</p>
                    <p>Por Moris Polanco</p>
                    <textarea oninput="state.pregunta = this.value" placeholder="Pregunta o caso"></textarea>
                    <button onclick="handleSubmit()">Obtener Respuesta</button>
                    ${state.respuesta ? `<div><strong>Respuesta:</strong> ${state.respuesta}</div>` : ''}
                `;
            };

            render();
        }

        Buscador();
    </script>
</body>
</html>
